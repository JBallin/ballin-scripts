#!/usr/bin/env bash

update() {
  printf '%s\n' 'ðŸ‘Ÿ getting fresh kicks...'

  git fetch > /dev/null
  if [ $? -ne 0 ]; then
    printf '%s\n' 'git fetch failed'
    exit 1
  fi

  git merge &> /dev/null
  if [ $? -ne 0 ]; then
    printf '%s\n' 'git merge failed. stashing changes and trying again...'
    git add . && git stash && git checkout main && git merge &> /dev/null
    if [ $? -ne 0 ]; then
      printf '%s\n' 'git merge failed again.'
      exit 1
    fi
  fi

  printf '\n'
  ./install.sh
}

(
  cd "$HOME/.ballin-scripts"
  update
)
